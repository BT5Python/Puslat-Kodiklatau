<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Peta Indonesia dengan Scan, Titik Kota, dan Jam</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #000;
}
#map {
  width: 100%;
  height: 100vh;
  filter: brightness(0.75);
  position: relative;
  z-index: 0;
}

/* Scan overlay vertikal dan horizontal */
.scan-vertical, .scan-horizontal {
  position: absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  mix-blend-mode: screen;
  z-index:500;
}

.scan-vertical {
  background: linear-gradient(to bottom, rgba(0,255,0,0) 0%, rgba(0,255,0,0.3) 50%, rgba(0,255,0,0) 100%);
}

.scan-horizontal {
  background: linear-gradient(to right, rgba(0,255,0,0) 0%, rgba(0,255,0,0.3) 50%, rgba(0,255,0,0) 100%);
}

/* Titik kota */
.city-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(0,255,0,0.2);
  position: absolute;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

/* Jam digital kanan atas */
#clock {
  position: absolute;
  top: 10px;
  right: 10px;
  color: #00ff00;
  font-family: monospace;
  font-size: 18px;
  z-index: 1000;
}
</style>
</head>
<body>

<div id="map"></div>
<div class="scan-vertical" id="scanV"></div>
<div class="scan-horizontal" id="scanH"></div>
<div id="clock"></div>

<script>
// Peta
var map = L.map('map', { zoomControl:true, attributionControl:false })
  .setView([-2.5, 118], 5);

L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { maxZoom: 18 }).addTo(map);

// Kota
var cities = [
  { name: "Jakarta", coords: [-6.2088, 106.8456] },
  { name: "Surabaya", coords: [-7.2575, 112.7521] },
  { name: "Medan", coords: [3.5952, 98.6722] },
  { name: "Makassar", coords: [-5.1477, 119.4327] },
  { name: "Denpasar", coords: [-8.65, 115.2167] },
  { name: "Pontianak", coords: [0.02, 109.33] },
  { name: "Jayapura", coords: [-2.533, 140.717] }
];

// Titik kota
var dotElements = [];
cities.forEach(c=>{
  var dot = document.createElement('div');
  dot.className = 'city-dot';
  document.body.appendChild(dot);
  dotElements.push({el: dot, coords: c.coords});
});

function updateDots(){
  dotElements.forEach(d=>{
    var point = map.latLngToContainerPoint(d.coords);
    d.el.style.left = point.x + 'px';
    d.el.style.top = point.y + 'px';
  });
}
map.on('move', updateDots);
map.on('zoom', updateDots);
updateDots();

// Scan bergantian dari luar peta
let scanV = document.getElementById('scanV');
let scanH = document.getElementById('scanH');
let scanPos = 0;
let scanSpeed = 3; // lebih cepat
let mode = 'vertical';

function animateScan() {
  if(mode === 'vertical'){
    scanPos += scanSpeed;
    scanV.style.transform = `translateY(${scanPos - window.innerHeight}px)`;
    scanH.style.transform = `translateX(-100%)`;

    dotElements.forEach(d=>{
      var top = parseFloat(d.el.style.top);
      if(top >= scanPos - 10 && top <= scanPos + 10){
        d.el.style.background = '#00ff00';
      } else {
        d.el.style.background = 'rgba(0,255,0,0.2)';
      }
    });

    if(scanPos > window.innerHeight * 2){
      mode = 'horizontal';
      scanPos = 0;
      scanV.style.transform = `translateY(-100%)`;
    }
  } else {
    scanPos += scanSpeed;
    scanH.style.transform = `translateX(${scanPos - window.innerWidth}px)`;
    scanV.style.transform = `translateY(-100%)`;

    dotElements.forEach(d=>{
      var left = parseFloat(d.el.style.left);
      if(left >= scanPos - 10 && left <= scanPos + 10){
        d.el.style.background = '#00ff00';
      } else {
        d.el.style.background = 'rgba(0,255,0,0.2)';
      }
    });

    if(scanPos > window.innerWidth * 2){
      mode = 'vertical';
      scanPos = 0;
      scanH.style.transform = `translateX(-100%)`;
    }
  }

  requestAnimationFrame(animateScan);
}
animateScan();

// Jam digital
function updateClock(){
  const now = new Date();
  const h = String(now.getHours()).padStart(2,'0');
  const m = String(now.getMinutes()).padStart(2,'0');
  const s = String(now.getSeconds()).padStart(2,'0');
  document.getElementById('clock').textContent = `${h}:${m}:${s}`;
}
setInterval(updateClock, 1000);
updateClock();
</script>

</body>
</html>
